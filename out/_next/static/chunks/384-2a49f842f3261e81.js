"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[384],{4338:function(e,t,a){a.d(t,{S:function(){return z}});var r=a(7437),s=a(2265),n=a(3774),o=a(4156),i=a(3247),c=a(401),l=a(4508),d=a(2869),u=a(5186),m=a(6343),f=a(9027),p=a(2489);f.fC,f.xz;let h=f.h_;f.x8;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(f.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});g.displayName=f.aV.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(h,{children:[(0,r.jsx)(g,{}),(0,r.jsxs)(f.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[s,(0,r.jsxs)(f.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}).displayName=f.VY.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(f.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})}).displayName=f.Dx.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(f.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})}).displayName=f.dk.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(m.mY,{ref:t,className:(0,l.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",a),...s})});x.displayName=m.mY.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,r.jsx)(i.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,r.jsx)(m.mY.Input,{ref:t,className:(0,l.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",a),...s})]})}).displayName=m.mY.Input.displayName;let y=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(m.mY.List,{ref:t,className:(0,l.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",a),...s})});y.displayName=m.mY.List.displayName;let v=s.forwardRef((e,t)=>(0,r.jsx)(m.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));v.displayName=m.mY.Empty.displayName;let b=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(m.mY.Group,{ref:t,className:(0,l.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",a),...s})});b.displayName=m.mY.Group.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(m.mY.Separator,{ref:t,className:(0,l.cn)("-mx-1 h-px bg-border",a),...s})}).displayName=m.mY.Separator.displayName;let w=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(m.mY.Item,{ref:t,className:(0,l.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a),...s})});w.displayName=m.mY.Item.displayName;var N=a(7312);let j=N.fC,C=N.xz,k=s.forwardRef((e,t)=>{let{className:a,align:s="center",sideOffset:n=4,...o}=e;return(0,r.jsx)(N.h_,{children:(0,r.jsx)(N.VY,{ref:t,align:s,sideOffset:n,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});k.displayName=N.VY.displayName;var R=a(5974);function S(e){let{options:t,value:a,onValueChange:m,onSearchChange:f,onInputChange:p,placeholder:h="Выберите...",searchPlaceholder:g="Поиск...",emptyMessage:N="Ничего не найдено.",loading:S=!1,disabled:_=!1,className:P,renderOption:A}=e,[E,Z]=s.useState(!1),[z,Y]=s.useState(""),I=t.find(e=>e.value===a);s.useEffect(()=>{E&&Y("")},[E]);let L=e=>{console.log("LocationAutocomplete: Search changed to:",e),Y(e),null==f||f(e)},U=e=>{let a=t.find(t=>t.value===e);a&&(m(a.value),Y(a.label)),Z(!1)};return console.log("LocationAutocomplete render:",{options:t.length,value:a,searchValue:z,open:E}),(0,r.jsxs)(j,{open:E,onOpenChange:Z,children:[(0,r.jsx)(C,{asChild:!0,children:(0,r.jsxs)(d.z,{variant:"outline",role:"combobox","aria-expanded":E,className:(0,l.cn)("w-full justify-between",P),disabled:_,onClick:()=>Z(!0),children:[I?(0,r.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,r.jsx)(n.Z,{className:"h-4 w-4 shrink-0"}),(0,r.jsx)("span",{className:"truncate",children:I.label}),I.country&&(0,r.jsx)(R.C,{variant:"secondary",className:"shrink-0 text-xs",children:I.country})]}):(0,r.jsx)("span",{className:"text-muted-foreground",children:h}),(0,r.jsx)(o.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,r.jsxs)(k,{className:"w-full p-0",align:"start",children:[(0,r.jsx)("div",{className:"p-2 border-b",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(i.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(u.I,{placeholder:g,value:z,onChange:e=>{L(e.target.value),null==p||p(e.target.value)},className:"pl-8",autoFocus:!0})]})}),(0,r.jsx)(x,{children:(0,r.jsxs)(y,{children:[(0,r.jsx)(v,{children:S?"Загрузка...":N}),(0,r.jsx)(b,{children:t.map(e=>(0,r.jsxs)(w,{value:e.value,onSelect:U,children:[(0,r.jsx)(c.Z,{className:(0,l.cn)("mr-2 h-4 w-4",a===e.value?"opacity-100":"opacity-0")}),A?A(e):(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-medium",children:e.label}),e.description&&(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:e.description})]})]},e.value))})]})})]})]})}var _=a(8502),P=a(9116),A=a(6815),E=a(1723),Z=a(6595);function z(e){let{type:t,value:a,onValueChange:o,cityValue:i,placeholder:c,label:l,className:d,showRemembered:u=!0}=e,[m,f]=(0,s.useState)([]),[p,h]=(0,s.useState)(!1),[g,x]=(0,s.useState)(""),[y,v]=(0,s.useState)([]),b=function(e,t){let[a,r]=(0,s.useState)(e);return(0,s.useEffect)(()=>{let t=setTimeout(()=>{r(e)},300);return()=>{clearTimeout(t)}},[e,300]),a}(g,0);(0,s.useEffect)(()=>{u&&w()},[i,u]);let w=(0,s.useCallback)(async()=>{try{let e=[];"city"===t?e=(await P.PH.getPopularAddresses(10)).addresses||[]:i&&(e=(await P.PH.getRememberedAddresses(i,10)).addresses||[]),v(e)}catch(e){console.error("Error loading remembered addresses:",e)}},[t,i,u]),N=(0,s.useCallback)(async e=>{if(console.log("EnhancedLocationSearch: Searching for:",e,"type:",t),!e.trim()||e.length<2){console.log("EnhancedLocationSearch: Query too short, showing remembered addresses"),u&&await w();return}h(!0);try{let a;let r=[];if("city"===t){if(console.log("EnhancedLocationSearch: Calling searchCities"),a=await _.t.searchCities(e,10),u)try{r=(await P.PH.searchAddresses(e,5)).addresses||[]}catch(e){console.error("Error searching remembered addresses:",e)}}else if(console.log("EnhancedLocationSearch: Calling searchStreets"),a=await _.t.searchStreets(e,i,10),u&&i)try{r=(await P.PH.getRememberedAddresses(i,5)).addresses||[]}catch(e){console.error("Error searching remembered addresses:",e)}if(console.log("EnhancedLocationSearch: Got result:",a),a.error){console.error("Geocoding error:",a.error),f([]);return}let s=a.suggestions.map(e=>{let a=e.address,r=e.display_name,s="",n=a.country;if("city"===t){let e=a.city||a.town||a.village;if(e){r=e;let t=[];a.state&&t.push(a.state),a.country&&t.push(a.country),s=t.join(", ")}}else{let e=a.street||a.road;if(e){r=e;let t=[];(a.city||a.town)&&t.push(a.city||a.town),a.state&&t.push(a.state),a.country&&t.push(a.country),s=t.join(", ")}}return{value:r,label:r,description:s,country:n,source:"geocoding"}}),n=r.map(e=>{let a="",r="";return"city"===t?(a=e.city,r="".concat(e.street,", ").concat(e.building)):(a=e.street,r="".concat(e.building)),e.residentialComplex&&(r+=" (".concat(e.residentialComplex,")")),{value:a,label:a,description:r,source:"remembered",usageCount:e.usageCount}}),o=[...s,...n].filter((e,t,a)=>t===a.findIndex(t=>t.value===e.value));o.sort((e,t)=>"remembered"===e.source&&"remembered"!==t.source?-1:"remembered"!==e.source&&"remembered"===t.source?1:e.usageCount&&t.usageCount?t.usageCount-e.usageCount:0),f(o)}catch(e){console.error("Error searching locations:",e),f([])}finally{h(!1)}},[t,i,u,w]);(0,s.useEffect)(()=>{N(b)},[b,N]);let j=y.map(e=>{let a="",r="";return"city"===t?(a=e.city,r="".concat(e.street,", ").concat(e.building)):(a=e.street,r="".concat(e.building)),e.residentialComplex&&(r+=" (".concat(e.residentialComplex,")")),{value:a,label:a,description:r,source:"remembered",usageCount:e.usageCount}}),C=g.trim()?m:j;return(0,r.jsxs)("div",{className:d,children:[l&&(0,r.jsx)(A._,{className:"mb-2 block",children:l}),(0,r.jsx)(S,{value:a||"",onValueChange:e=>{o(e),x(e)},onInputChange:e=>{x(e),!e.trim()&&(f([]),u&&w())},options:C,loading:p,placeholder:c||("city"===t?"Поиск города...":"Поиск улицы..."),renderOption:e=>(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:["remembered"===e.source?(0,r.jsx)(E.Z,{className:"h-4 w-4 text-blue-500"}):(0,r.jsx)(n.Z,{className:"h-4 w-4 text-gray-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.label}),e.description&&(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]}),"remembered"===e.source&&e.usageCount&&(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(Z.Z,{className:"h-3 w-3 text-yellow-500 fill-current"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:e.usageCount})]})]})})]})}},5974:function(e,t,a){a.d(t,{C:function(){return i}});var r=a(7437);a(2265);var s=a(535),n=a(4508);let o=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(o({variant:a}),t),...s})}},2869:function(e,t,a){a.d(t,{z:function(){return l}});var r=a(7437),s=a(2265),n=a(7053),o=a(535),i=a(4508);let c=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:a,variant:s,size:o,asChild:l=!1,...d}=e,u=l?n.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(c({variant:s,size:o,className:a})),ref:t,...d})});l.displayName="Button"},6070:function(e,t,a){a.d(t,{Ol:function(){return i},SZ:function(){return l},Zb:function(){return o},aY:function(){return d},ll:function(){return c}});var r=a(7437),s=a(2265),n=a(4508);let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});o.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});c.displayName="CardTitle";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});l.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},5186:function(e,t,a){a.d(t,{I:function(){return o}});var r=a(7437),s=a(2265),n=a(4508);let o=s.forwardRef((e,t)=>{let{className:a,type:s,error:o,...i}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o&&"border-red-500 focus-visible:ring-red-500",a),ref:t,...i})});o.displayName="Input"},6815:function(e,t,a){a.d(t,{_:function(){return l}});var r=a(7437),s=a(2265),n=a(6394),o=a(535),i=a(4508);let c=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,i.cn)(c(),a),...s})});l.displayName=n.f.displayName},8730:function(e,t,a){a.d(t,{H:function(){return d},a:function(){return u}});var r=a(7437),s=a(2265),n=a(9376),o=a(4131),i=a(9116),c=a(9064);let l=(0,s.createContext)(void 0);function d(e){let{children:t}=e,[a,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0),f=(0,n.useRouter)();(0,s.useEffect)(()=>{let e=o.Z.get("token");e?(i.hi.defaults.headers.common.Authorization="Bearer ".concat(e),p()):m(!1)},[]);let p=async()=>{try{let e=await i.hi.get("/auth/me");d(e.data.user)}catch(e){o.Z.remove("token"),delete i.hi.defaults.headers.common.Authorization}finally{m(!1)}},h=async(e,t)=>{try{let{token:a,user:r}=(await i.hi.post("/auth/login",{email:e,password:t})).data;o.Z.set("token",a,{expires:7}),i.hi.defaults.headers.common.Authorization="Bearer ".concat(a),d(r),c.ZP.success("Вход выполнен успешно!"),f.push("/dashboard")}catch(e){var a,r;throw c.ZP.error((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"Ошибка входа"),e}},g=async e=>{try{let{user:t}=(await i.hi.post("/auth/register",e)).data;c.ZP.success("Код подтверждения отправлен на ваш email. Пожалуйста, введите его для завершения регистрации."),f.push("/verify-email/verify?email=".concat(encodeURIComponent(t.email)))}catch(e){var t,a;throw c.ZP.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Ошибка регистрации"),e}},x=async(e,t)=>{try{await i.hi.post("/auth/verify-email",{email:e,code:t}),c.ZP.success("Email успешно подтвержден!"),a?await p():f.push("/login")}catch(e){var r,s;throw c.ZP.error((null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.message)||"Ошибка подтверждения email"),e}};return(0,r.jsx)(l.Provider,{value:{user:a,login:h,register:g,verifyEmail:x,logout:()=>{o.Z.remove("token"),delete i.hi.defaults.headers.common.Authorization,d(null),c.ZP.success("Вы успешно вышли из системы"),f.push("/")},loading:u},children:t})}function u(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9116:function(e,t,a){a.d(t,{PH:function(){return o},hi:function(){return n},zy:function(){return i}});var r=a(3464),s=a(257);let n=r.Z.create({baseURL:s.env.NEXT_PUBLIC_API_URL||"http://localhost:4100/api",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>e,e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(window.location.href="/login"),Promise.reject(e)});let o={getRememberedAddresses:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=new URLSearchParams;return e&&a.append("city",e),a.append("limit",t.toString()),(await n.get("/addresses/remembered?".concat(a))).data},saveRememberedAddress:async e=>(await n.post("/addresses/remembered",e)).data,getPopularAddresses:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return(await n.get("/addresses/popular?limit=".concat(e))).data},searchAddresses:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await n.get("/addresses/search?q=".concat(encodeURIComponent(e),"&limit=").concat(t))).data}},i={getTrendingTopics:async()=>(await n.get("/recommendations/trending-topics")).data,getStats:async()=>(await n.get("/recommendations/stats")).data,getUserPreferences:async()=>(await n.get("/recommendations/user-preferences")).data}},8502:function(e,t,a){a.d(t,{t:function(){return s}});class r{async searchCities(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a="city:".concat(e,":").concat(t);if(console.log("Searching cities for:",e),this.cache.has(a))return console.log("Using cached result for:",e),this.cache.get(a);try{let r=new URLSearchParams({name_startsWith:e,maxRows:t.toString(),username:"oktamov_shohjahon",featureClass:"P"}),s="".concat("http://api.geonames.org/searchJSON","?").concat(r);console.log("Calling GeoNames API:",s);let n=await fetch(s,{headers:{Accept:"application/json"}});if(!n.ok)throw Error("GeoNames API error: ".concat(n.status));let o=await n.json();if(console.log("GeoNames response:",o),Array.isArray(o.geonames)){let t=o.geonames.map(e=>({place_id:e.geonameId,display_name:"".concat(e.name).concat(e.adminName1?", "+e.adminName1:"").concat(e.countryName?", "+e.countryName:""),lat:e.lat,lon:e.lng,type:e.fcodeName,address:{city:e.name,state:e.adminName1,country:e.countryName}})),r={suggestions:t};return this.cache.set(a,r),console.log("Found",t.length,"cities for:",e),r}return{suggestions:[]}}catch(e){return console.error("Error searching cities:",e),{suggestions:[],error:"Failed to search cities"}}}async searchStreets(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="street:".concat(e,":").concat(t,":").concat(a);if(this.cache.has(r))return this.cache.get(r);try{let s=new URLSearchParams({q:t?"".concat(e,", ").concat(t):e,format:"json",addressdetails:"1",limit:a.toString(),featuretype:"street"}),n=await fetch("".concat("https://nominatim.openstreetmap.org/search","?").concat(s),{headers:{Accept:"application/json","User-Agent":"ProKvartiru/1.0"}});if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));let o={suggestions:(await n.json()).map(e=>({place_id:e.place_id,display_name:e.display_name,lat:e.lat,lon:e.lon,type:e.type,address:e.address||{}}))};return this.cache.set(r,o),o}catch(e){return console.error("Error searching streets:",e),{suggestions:[],error:"Failed to search streets"}}}async reverseGeocode(e,t){try{let a=new URLSearchParams({lat:e,lon:t,format:"json",addressdetails:"1"}),r=await fetch("".concat("https://nominatim.openstreetmap.org/reverse","?").concat(a),{headers:{Accept:"application/json","User-Agent":"ProKvartiru/1.0"}});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let s=await r.json();return{place_id:s.place_id,display_name:s.display_name,lat:s.lat,lon:s.lon,type:s.type,address:s.address||{}}}catch(e){return console.error("Error reverse geocoding:",e),null}}clearCache(){this.cache.clear()}getCacheSize(){return this.cache.size}constructor(){this.cache=new Map}}let s=new r},4508:function(e,t,a){a.d(t,{cn:function(){return n}});var r=a(1994),s=a(3335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}}}]);