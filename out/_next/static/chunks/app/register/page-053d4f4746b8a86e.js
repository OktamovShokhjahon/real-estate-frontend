(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{235:(e,s,a)=>{"use strict";a.d(s,{J:()=>c});var t=a(5155),r=a(2115),i=a(489),l=a(3101),n=a(5016);let d=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.b,{ref:s,className:(0,n.cn)(d(),a),...r})});c.displayName=i.b.displayName},272:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>T});var t=a(5155),r=a(2115),i=a(2619),l=a.n(i),n=a(2734),d=a(7003),c=a(6170),o=a(235),m=a(8162),u=a(5917),p=a(5016);let f=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(m.bL,{ref:s,className:(0,p.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,t.jsx)(m.C1,{className:(0,p.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(u.A,{className:"h-4 w-4"})})})});f.displayName=m.bL.displayName;var h=a(3209),x=a(9511),g=a(5229);let N=x.bL,b=x.l9,v=x.ZL;x.bm;let j=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(x.hJ,{ref:s,className:(0,p.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});j.displayName=x.hJ.displayName;let y=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(v,{children:[(0,t.jsx)(j,{}),(0,t.jsxs)(x.UC,{ref:s,className:(0,p.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[r,(0,t.jsxs)(x.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(g.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});y.displayName=x.UC.displayName;let w=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,p.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};w.displayName="DialogHeader";let A=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(x.hE,{ref:s,className:(0,p.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});A.displayName=x.hE.displayName;let k=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(x.VY,{ref:s,className:(0,p.cn)("text-sm text-muted-foreground",a),...r})});k.displayName=x.VY.displayName;let C=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,R=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d@$!%*?&]{8,}$/,F=new RegExp("^[a-zA-Z".concat("\\u0400-\\u04FF\\u0500-\\u052F\\u2DE0-\\u2DFF\\uA640-\\uA69F","\\s\\-']{2,50}$")),z=e=>e.trim().replace(/\s+/g," ");function T(){let[e,s]=(0,r.useState)({email:"",password:"",firstName:"",lastName:"",acceptTerms:!1}),[a,i]=(0,r.useState)({}),[m,u]=(0,r.useState)(!1),{register:x}=(0,n.A)(),g=async s=>{s.preventDefault();let a={email:e.email.trim().toLowerCase(),password:e.password,firstName:z(e.firstName),lastName:z(e.lastName),acceptTerms:e.acceptTerms},t=function(e){let s={};return e.email&&""!==e.email.trim()?C.test(e.email)||(s.email="Введите корректный email"):s.email="Email обязателен",e.password&&""!==e.password.trim()?R.test(e.password)||(s.password="Пароль должен содержать минимум 8 символов, заглавные и строчные буквы и цифры"):s.password="Пароль обязателен",e.firstName&&""!==e.firstName.trim()?F.test(e.firstName)||(s.firstName="Имя может содержать только буквы, пробелы, дефисы и апострофы (2-50 символов)"):s.firstName="Имя обязательно",e.lastName&&""!==e.lastName.trim()?F.test(e.lastName)||(s.lastName="Фамилия может содержать только буквы, пробелы, дефисы и апострофы (2-50 символов)"):s.lastName="Фамилия обязательна",e.acceptTerms||(s.acceptTerms="Необходимо принять условия использования"),s}(a);if(Object.keys(t).length>0)return void i(t);i({}),u(!0);try{await x(a)}catch(e){}finally{u(!1)}},v=e=>{let{name:t,value:r}=e.target;s(e=>({...e,[t]:r})),a[t]&&i(e=>({...e,[t]:""}))};return(0,t.jsx)("div",{className:"max-w-md mx-auto mt-16",children:(0,t.jsxs)(h.Zp,{children:[(0,t.jsxs)(h.aR,{children:[(0,t.jsx)(h.ZB,{children:"Регистрация"}),(0,t.jsx)(h.BT,{children:"Создайте аккаунт, чтобы начать оставлять отзывы"})]}),(0,t.jsxs)(h.Wu,{children:[(0,t.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"firstName",children:"Имя"}),(0,t.jsx)(c.p,{id:"firstName",name:"firstName",value:e.firstName,onChange:v,required:!0,className:a.firstName?"border-red-500":""}),a.firstName&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:a.firstName})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"lastName",children:"Фамилия"}),(0,t.jsx)(c.p,{id:"lastName",name:"lastName",value:e.lastName,onChange:v,required:!0,className:a.lastName?"border-red-500":""}),a.lastName&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:a.lastName})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"email",children:"Email"}),(0,t.jsx)(c.p,{id:"email",name:"email",type:"email",value:e.email,onChange:v,required:!0,className:a.email?"border-red-500":""}),a.email&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:a.email})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"password",children:"Пароль"}),(0,t.jsx)(c.p,{id:"password",name:"password",type:"password",value:e.password,onChange:v,required:!0,minLength:8,className:a.password?"border-red-500":""}),a.password&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:a.password}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Пароль должен содержать минимум 8 символов с заглавными буквами, строчными буквами и цифрами"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(f,{id:"acceptTerms",checked:e.acceptTerms,onCheckedChange:e=>{s(s=>({...s,acceptTerms:e})),a.acceptTerms&&i(e=>({...e,acceptTerms:""}))}}),(0,t.jsx)("div",{className:"flex items-center space-x-1",children:(0,t.jsxs)(o.J,{htmlFor:"acceptTerms",className:"text-sm",children:["Я принимаю"," ",(0,t.jsxs)(N,{children:[(0,t.jsx)(b,{asChild:!0,children:(0,t.jsx)("button",{type:"button",className:"text-blue-600 hover:underline font-medium",children:"условия использования"})}),(0,t.jsxs)(y,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(w,{children:[(0,t.jsx)(A,{children:"Публичная оферта об использовании сайта с отзывами о жилых комплексах и квартирах"}),(0,t.jsx)(k,{children:"Настоящий документ является официальным предложением (публичной офертой) в соответствии со статьей 395 Гражданского кодекса Республики Казахстан"})]}),(0,t.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,t.jsx)("p",{children:"Пользуясь Сайтом, Вы (далее — \xabПользователь\xbb) подтверждаете, что ознакомлены с условиями настоящей оферты и соглашаетесь с ними в полном объеме."}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"1. Назначение сайта"}),(0,t.jsx)("p",{className:"mb-2",children:"1.1. Сайт является информационной платформой, предоставляющей Пользователям возможность размещать и читать отзывы, мнения, комментарии, фотографии, а также иную информацию о квартирах, жилых домах и жилых комплексах."}),(0,t.jsx)("p",{children:"1.2. Сайт не является средством массовой информации, агентом, застройщиком, риэлтором или посредником в сделках с недвижимостью."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"2. Ответственность администрации"}),(0,t.jsx)("p",{className:"mb-2",children:"2.1. Администрация Сайта (далее — \xabАдминистрация\xbb) не проверяет достоверность размещаемой Пользователями информации и не несёт ответственности за ее содержание, точность, полноту, достоверность, актуальность, соответствие действительности, а также возможные последствия её использования."}),(0,t.jsx)("p",{className:"mb-2",children:"2.2. Администрация Сайта не несет ответственности за мнения, оценки и утверждения, размещённые Пользователями в отзывах, комментариях или любом другом контенте."}),(0,t.jsx)("p",{children:"2.3. Администрация Сайта не обязана осуществлять предварительную модерацию или редактуру публикуемой информации, но вправе по своему усмотрению удалять материалы, нарушающие действующее законодательство Республики Казахстан, нормы морали, этики или настоящие условия."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"3. Обязанности пользователей"}),(0,t.jsx)("p",{className:"mb-2",children:"3.1. Пользователь обязуется:"}),(0,t.jsxs)("ul",{className:"list-disc pl-6 space-y-1",children:[(0,t.jsx)("li",{children:"не размещать заведомо ложную, клеветническую, оскорбительную или иную незаконную информацию;"}),(0,t.jsx)("li",{children:"не нарушать авторские права, права на товарные знаки, конфиденциальную информацию и другие права третьих лиц;"}),(0,t.jsx)("li",{children:"соблюдать нормы законодательства Республики Казахстан, включая Закон \xabО средствах массовой информации\xbb, Закон \xabО защите персональных данных\xbb, Гражданский кодекс и иные нормативные правовые акты."})]}),(0,t.jsx)("p",{className:"mt-2",children:"3.2. Пользователь несёт полную ответственность за размещённую им информацию и возможные последствия её публикации."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"4. Использование информации"}),(0,t.jsx)("p",{className:"mb-2",children:"4.1. Администрация Сайта вправе использовать, сохранять, обрабатывать и распространять пользовательский контент (отзывы, комментарии и иное), размещённый на Сайте, без отдельного согласия автора, при условии соблюдения норм законодательства."}),(0,t.jsx)("p",{children:"4.2. Администрация не гарантирует постоянную доступность Сайта, отсутствие ошибок, сбоев, а также сохранность размещённой информации."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"5. Изменение условий"}),(0,t.jsx)("p",{children:"5.1. Администрация вправе в любое время вносить изменения в настоящую публичную оферту без предварительного уведомления Пользователей. Новая редакция вступает в силу с момента размещения на Сайте."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"6. Заключительные положения"}),(0,t.jsx)("p",{className:"mb-2",children:"6.1. Настоящая публичная оферта регулируется законодательством Республики Казахстан."}),(0,t.jsx)("p",{children:"6.2. Все споры и разногласия, возникающие в связи с использованием Сайта, подлежат разрешению в порядке, установленном действующим законодательством Республики Казахстан."})]})]})]})]})]})})]}),a.acceptTerms&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:a.acceptTerms})]}),(0,t.jsx)(d.$,{type:"submit",className:"w-full",disabled:m,children:m?"Создание аккаунта...":"Зарегистрироваться"})]}),(0,t.jsxs)("div",{className:"mt-4 text-center text-sm",children:["Уже есть аккаунт?"," ",(0,t.jsx)(l(),{href:(0,p.Y)("/login"),className:"text-blue-600 hover:underline",children:"Войти"})]})]})]})})}},2734:(e,s,a)=>{"use strict";a.d(s,{A:()=>u,O:()=>m});var t=a(5155),r=a(2115),i=a(63),l=a(2378),n=a(7621),d=a(2663),c=a(5016);let o=(0,r.createContext)(void 0);function m(e){let{children:s}=e,[a,m]=(0,r.useState)(null),[u,p]=(0,r.useState)(!0),f=(0,i.useRouter)();(0,r.useEffect)(()=>{let e=l.A.get("token");e?(n.FH.defaults.headers.common.Authorization="Bearer ".concat(e),h()):p(!1)},[]);let h=async()=>{try{let e=await n.FH.get("/auth/me");m(e.data.user)}catch(e){l.A.remove("token"),delete n.FH.defaults.headers.common.Authorization,m(null)}finally{p(!1)}},x=async(e,s)=>{try{let{token:a,user:t}=(await n.FH.post("/auth/login",{email:e,password:s})).data;l.A.set("token",a,{expires:7}),n.FH.defaults.headers.common.Authorization="Bearer ".concat(a),m(t),d.Ay.success("Вход выполнен успешно!"),f.push((0,c.Y)("/dashboard"))}catch(e){var a,t;throw console.log(e),d.Ay.error((null==(t=e.response)||null==(a=t.data)?void 0:a.message)||"Ошибка входа"),e}},g=async e=>{try{let{user:s}=(await n.FH.post("/auth/register",e)).data;d.Ay.success("Код подтверждения отправлен на ваш email. Пожалуйста, введите его для завершения регистрации."),f.push("".concat((0,c.Y)("/verify-email/verify"),"?email=").concat(encodeURIComponent(s.email)))}catch(e){var s,a;throw d.Ay.error((null==(a=e.response)||null==(s=a.data)?void 0:s.message)||"Ошибка регистрации"),e}},N=async(e,s)=>{try{await n.FH.post("/auth/verify-email",{email:e,code:s}),d.Ay.success("Email успешно подтвержден!"),a?await h():f.push((0,c.Y)("/login"))}catch(e){var t,r;throw d.Ay.error((null==(r=e.response)||null==(t=r.data)?void 0:t.message)||"Ошибка подтверждения email"),e}};return(0,t.jsx)(o.Provider,{value:{user:a,isLoading:u,loading:u,login:x,register:g,verifyEmail:N,logout:()=>{l.A.remove("token"),delete n.FH.defaults.headers.common.Authorization,m(null),d.Ay.success("Вы успешно вышли из системы"),f.push("/")}},children:s})}function u(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3209:(e,s,a)=>{"use strict";a.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>l,aR:()=>n});var t=a(5155),r=a(2115),i=a(5016);let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});l.displayName="Card";let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});n.displayName="CardHeader";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",a),...r})});o.displayName="CardContent",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},5016:(e,s,a)=>{"use strict";a.d(s,{Y:()=>l,cn:()=>i});var t=a(2821),r=a(5889);function i(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,r.QP)((0,t.$)(s))}function l(e){return e}},6170:(e,s,a)=>{"use strict";a.d(s,{p:()=>l});var t=a(5155),r=a(2115),i=a(5016);let l=r.forwardRef((e,s)=>{let{className:a,type:r,error:l,...n}=e;return(0,t.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l&&"border-red-500 focus-visible:ring-red-500",a),ref:s,...n})});l.displayName="Input"},7003:(e,s,a)=>{"use strict";a.d(s,{$:()=>c});var t=a(5155),r=a(2115),i=a(2467),l=a(3101),n=a(5016);let d=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,s)=>{let{className:a,variant:r,size:l,asChild:c=!1,...o}=e,m=c?i.DX:"button";return(0,t.jsx)(m,{className:(0,n.cn)(d({variant:r,size:l,className:a})),ref:s,...o})});c.displayName="Button"},7440:(e,s,a)=>{Promise.resolve().then(a.bind(a,272))},7621:(e,s,a)=>{"use strict";a.d(s,{FH:()=>i,G9:()=>n,hA:()=>l});var t=a(5125),r=a(5704);let i=t.A.create({baseURL:r.env.NEXT_PUBLIC_API_URL||"https://prokvartiru.kz/api",headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>e,e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>Promise.reject(e));let l={getRememberedAddresses:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=new URLSearchParams;return e&&a.append("city",e),a.append("limit",s.toString()),(await i.get("/addresses/remembered?".concat(a))).data},saveRememberedAddress:async e=>(await i.post("/addresses/remembered",e)).data,getPopularAddresses:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return(await i.get("/addresses/popular?limit=".concat(e))).data},searchAddresses:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await i.get("/addresses/search?q=".concat(encodeURIComponent(e),"&limit=").concat(s))).data}},n={getTrendingTopics:async()=>(await i.get("/recommendations/trending-topics")).data,getStats:async()=>(await i.get("/recommendations/stats")).data,getUserPreferences:async()=>(await i.get("/recommendations/user-preferences")).data}}},e=>{e.O(0,[783,812,619,395,138,441,255,358],()=>e(e.s=7440)),_N_E=e.O()}]);