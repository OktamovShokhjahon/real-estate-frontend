(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{235:(e,t,a)=>{"use strict";a.d(t,{J:()=>l});var r=a(5155),s=a(2115),i=a(489),n=a(3101),d=a(5016);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.b,{ref:t,className:(0,d.cn)(o(),a),...s})});l.displayName=i.b.displayName},489:(e,t,a)=>{"use strict";a.d(t,{b:()=>d});var r=a(2115),s=a(7602),i=a(5155),n=r.forwardRef((e,t)=>(0,i.jsx)(s.sG.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var d=n},1860:(e,t,a)=>{Promise.resolve().then(a.bind(a,5777))},2734:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,O:()=>u});var r=a(5155),s=a(2115),i=a(63),n=a(2378),d=a(7621),o=a(2663);let l=(0,s.createContext)(void 0);function u(e){let{children:t}=e,[a,u]=(0,s.useState)(null),[c,m]=(0,s.useState)(!0),p=(0,i.useRouter)();(0,s.useEffect)(()=>{let e=n.A.get("token");e?(d.FH.defaults.headers.common.Authorization="Bearer ".concat(e),h()):m(!1)},[]);let h=async()=>{try{let e=await d.FH.get("/auth/me");u(e.data.user)}catch(e){n.A.remove("token"),delete d.FH.defaults.headers.common.Authorization}finally{m(!1)}},f=async(e,t)=>{try{let{token:a,user:r}=(await d.FH.post("/auth/login",{email:e,password:t})).data;n.A.set("token",a,{expires:7}),d.FH.defaults.headers.common.Authorization="Bearer ".concat(a),u(r),o.Ay.success("Вход выполнен успешно!"),p.push("/dashboard.html")}catch(e){var a,r;throw o.Ay.error((null==(r=e.response)||null==(a=r.data)?void 0:a.message)||"Ошибка входа"),e}},g=async e=>{try{let{user:t}=(await d.FH.post("/auth/register",e)).data;o.Ay.success("Код подтверждения отправлен на ваш email. Пожалуйста, введите его для завершения регистрации."),p.push("/verify-email/verify.html?email=".concat(encodeURIComponent(t.email)))}catch(e){var t,a;throw o.Ay.error((null==(a=e.response)||null==(t=a.data)?void 0:t.message)||"Ошибка регистрации"),e}},v=async(e,t)=>{try{await d.FH.post("/auth/verify-email",{email:e,code:t}),o.Ay.success("Email успешно подтвержден!"),a?await h():p.push("/login.html")}catch(e){var r,s;throw o.Ay.error((null==(s=e.response)||null==(r=s.data)?void 0:r.message)||"Ошибка подтверждения email"),e}};return(0,r.jsx)(l.Provider,{value:{user:a,isLoading:c,loading:c,login:f,register:g,verifyEmail:v,logout:()=>{n.A.remove("token"),delete d.FH.defaults.headers.common.Authorization,u(null),o.Ay.success("Вы успешно вышли из системы"),p.push("/")}},children:t})}function c(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3209:(e,t,a)=>{"use strict";a.d(t,{BT:()=>l,Wu:()=>u,ZB:()=>o,Zp:()=>n,aR:()=>d});var r=a(5155),s=a(2115),i=a(5016);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});n.displayName="Card";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...s})});d.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});l.displayName="CardDescription";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...s})});u.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},5016:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var r=a(2821),s=a(5889);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},5777:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var r=a(5155),s=a(2115),i=a(2619),n=a.n(i),d=a(2734),o=a(7003),l=a(6170),u=a(235),c=a(3209);let m="\\u0400-\\u04FF\\u0500-\\u052F\\u2DE0-\\u2DFF\\uA640-\\uA69F\\u1C80-\\u1C8F",p={email:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,password:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d@$!%*?&]{8,}$/,name:new RegExp("^[a-zA-Z".concat(m,"\\s\\-']{2,50}$")),city:new RegExp("^[a-zA-Z".concat(m,"\\s\\-.]{2,100}$")),street:new RegExp("^[a-zA-Z".concat(m,"0-9\\s\\-.,']{2,200}$")),building:new RegExp("^[a-zA-Z".concat(m,"0-9\\s\\-.,'/]{1,50}$")),apartmentNumber:/^[a-zA-Z0-9-]{1,20}$/,floor:/^-?[0-9]{1,3}$/,phone:/^[+]?[1-9][\d]{0,15}$/,phoneLastFour:/^[0-9]{4}$/,idLastFour:/^[0-9]{4}$/,landlordName:new RegExp("^[a-zA-Z".concat(m,"\\s\\-.']{2,100}$")),reviewText:new RegExp("^[\\w".concat(m,"\\s.,!?;:\\-'\"$$$$[\\]/&%$#@+=*]{10,5000}$")),rating:/^[1-5]$/,year:new RegExp("^(19[0-9]{2}|20[0-9]{2}|".concat(new Date().getFullYear()+1,")$")),month:/^(1[0-2]|[1-9])$/,numberOfRooms:/^[1-8]$/,searchQuery:new RegExp("^[a-zA-Z".concat(m,"0-9\\s\\-']{1,100}$")),commentText:new RegExp("^[\\w".concat(m,"\\s.,!?;:\\-'\"$$$$[\\]/&%$#@+=*]{1,1000}$")),tenantFullName:new RegExp("^[a-zA-Z".concat(m,"\\s\\-'.]{2,100}$")),url:/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)$/,username:/^[a-zA-Z0-9_-]{3,30}$/,postalCode:/^[a-zA-Z0-9\s-]{3,10}$/,hexColor:/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/},h={isValidEmail:e=>p.email.test(e),isValidPassword:e=>p.password.test(e),isValidName:e=>p.name.test(e),isValidCity:e=>p.city.test(e),isValidStreet:e=>p.street.test(e),isValidBuilding:e=>p.building.test(e),isValidApartmentNumber:e=>p.apartmentNumber.test(e),isValidFloor:e=>p.floor.test(e.toString()),isValidPhone:e=>p.phone.test(e),isValidPhoneLastFour:e=>p.phoneLastFour.test(e),isValidIdLastFour:e=>p.idLastFour.test(e),isValidLandlordName:e=>p.landlordName.test(e),isValidReviewText:e=>p.reviewText.test(e),isValidRating:e=>p.rating.test(e.toString()),isValidYear:e=>p.year.test(e.toString()),isValidMonth:e=>p.month.test(e.toString()),isValidNumberOfRooms:e=>p.numberOfRooms.test(e.toString()),isValidUrl:e=>p.url.test(e),isValidUsername:e=>p.username.test(e),isValidPostalCode:e=>p.postalCode.test(e),isValidHexColor:e=>p.hexColor.test(e),isValidTenantFullName:e=>p.tenantFullName.test(e),isValidSearchQuery:e=>p.searchQuery.test(e),isValidCommentText:e=>p.commentText.test(e)},f={sanitizeEmail:e=>"string"!=typeof e?"":e.trim().toLowerCase().substring(0,254)},g={email:{required:"Email обязателен",invalid:"Пожалуйста, введите корректный email адрес"},password:{required:"Пароль обязателен",invalid:"Пароль должен содержать минимум 8 символов с заглавными буквами, строчными буквами и цифрами",minLength:"Пароль должен содержать минимум 8 символов"},name:{required:"Имя обязательно",invalid:"Имя может содержать только буквы, пробелы, дефисы и апострофы",minLength:"Имя должно содержать минимум 2 символа",maxLength:"Имя не должно превышать 50 символов"},city:{required:"Город обязателен",invalid:"Название города содержит недопустимые символы",minLength:"Название города должно содержать минимум 2 символа",maxLength:"Название города не должно превышать 100 символов"},street:{required:"Улица обязательна",invalid:"Название улицы содержит недопустимые символы",minLength:"Название улицы должно содержать минимум 2 символа",maxLength:"Название улицы не должно превышать 200 символов"},building:{required:"Здание обязательно",invalid:"Название/номер здания содержит недопустимые символы",minLength:"Здание должно содержать минимум 1 символ",maxLength:"Здание не должно превышать 50 символов"},apartmentNumber:{invalid:"Номер квартиры содержит недопустимые символы",maxLength:"Номер квартиры не должен превышать 20 символов"},floor:{invalid:"Этаж должен быть корректным числом"},phoneLastFour:{required:"Последние четыре цифры телефона обязательны",invalid:"Последние четыре цифры телефона должны быть ровно 4 цифрами"},idLastFour:{required:"Последние четыре цифры ID обязательны",invalid:"Последние четыре цифры ID должны быть ровно 4 цифрами"},landlordName:{required:"Имя арендодателя обязательно",invalid:"Имя арендодателя содержит недопустимые символы",minLength:"Имя арендодателя должно содержать минимум 2 символа",maxLength:"Имя арендодателя не должно превышать 100 символов"},reviewText:{required:"Текст отзыва обязателен",invalid:"Текст отзыва содержит недопустимые символы",minLength:"Текст отзыва должен содержать минимум 10 символов",maxLength:"Текст отзыва не должен превышать 5000 символов"},rating:{invalid:"Рейтинг должен быть от 1 до 5"},year:{required:"Год обязателен",invalid:"Пожалуйста, введите корректный год"},month:{required:"Месяц обязателен",invalid:"Пожалуйста, выберите корректный месяц"},numberOfRooms:{required:"Количество комнат обязательно",invalid:"Количество комнат должно быть от 1 до 8"},tenantFullName:{required:"Полное имя арендатора обязательно",invalid:"Полное имя арендатора содержит недопустимые символы",minLength:"Полное имя арендатора должно содержать минимум 2 символа",maxLength:"Полное имя арендатора не должно превышать 100 символов"},commentText:{required:"Текст комментария обязателен",invalid:"Текст комментария содержит недопустимые символы",minLength:"Комментарий должен содержать минимум 1 символ",maxLength:"Комментарий не должен превышать 1000 символов"},searchQuery:{invalid:"Поисковый запрос содержит недопустимые символы",maxLength:"Поисковый запрос не должен превышать 100 символов"}},v=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=g[t];if(a&&(!e||""===e.trim()))return r&&"required"in r?r.required:"This field is required";if(!e||""===e.trim())return null;let s=h["isValid".concat(t.charAt(0).toUpperCase()+t.slice(1))];return s&&!s(e)?r.invalid||"Invalid format":null};var x=a(63);function w(){let[e,t]=(0,s.useState)({email:"",password:""}),[a,i]=(0,s.useState)({}),[m,p]=(0,s.useState)(!1),{login:h}=(0,d.A)();(0,x.useRouter)();let g={email:{type:"email",required:!0},password:{type:"password",required:!0}},w=async t=>{t.preventDefault();let a={email:f.sanitizeEmail(e.email),password:e.password},r=((e,t)=>{let a={};for(let[r,s]of Object.entries(t)){let t=v(e[r],s.type,s.required);t&&(a[r]=t)}return a})(a,g);if(Object.keys(r).length>0)return void i(r);i({}),p(!0);try{await h(a.email,a.password)}catch(e){}finally{p(!1)}},y=e=>{let{name:r,value:s}=e.target;t(e=>({...e,[r]:s})),a[r]&&i(e=>({...e,[r]:""}))};return(0,r.jsx)("div",{className:"max-w-md mx-auto mt-16",children:(0,r.jsxs)(c.Zp,{children:[(0,r.jsxs)(c.aR,{children:[(0,r.jsx)(c.ZB,{children:"Вход"}),(0,r.jsx)(c.BT,{children:"Введите ваши учетные данные для доступа к аккаунту"})]}),(0,r.jsxs)(c.Wu,{children:[(0,r.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.J,{htmlFor:"email",children:"Email"}),(0,r.jsx)(l.p,{id:"email",name:"email",type:"email",value:e.email,onChange:y,required:!0,className:a.email?"border-red-500":""}),a.email&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:a.email})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.J,{htmlFor:"password",children:"Пароль"}),(0,r.jsx)(l.p,{id:"password",name:"password",type:"password",value:e.password,onChange:y,required:!0,className:a.password?"border-red-500":""}),a.password&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:a.password})]}),(0,r.jsx)(o.$,{type:"submit",className:"w-full",disabled:m,children:m?"Вход...":"Войти"})]}),(0,r.jsxs)("div",{className:"mt-4 text-center text-sm",children:["Нет аккаунта? ",(0,r.jsx)(n(),{href:"/register.html",className:"text-blue-600 hover:underline",children:"Зарегистрироваться"})]})]})]})})}},6170:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var r=a(5155),s=a(2115),i=a(5016);let n=s.forwardRef((e,t)=>{let{className:a,type:s,error:n,...d}=e;return(0,r.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n&&"border-red-500 focus-visible:ring-red-500",a),ref:t,...d})});n.displayName="Input"},7003:(e,t,a)=>{"use strict";a.d(t,{$:()=>l});var r=a(5155),s=a(2115),i=a(2467),n=a(3101),d=a(5016);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:l=!1,...u}=e,c=l?i.DX:"button";return(0,r.jsx)(c,{className:(0,d.cn)(o({variant:s,size:n,className:a})),ref:t,...u})});l.displayName="Button"},7621:(e,t,a)=>{"use strict";a.d(t,{FH:()=>i,G9:()=>d,hA:()=>n});var r=a(5125),s=a(5704);let i=r.A.create({baseURL:s.env.NEXT_PUBLIC_API_URL||"https://prokvartiru.kz/api",headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>e,e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>Promise.reject(e));let n={getRememberedAddresses:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=new URLSearchParams;return e&&a.append("city",e),a.append("limit",t.toString()),(await i.get("/addresses/remembered?".concat(a))).data},saveRememberedAddress:async e=>(await i.post("/addresses/remembered",e)).data,getPopularAddresses:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return(await i.get("/addresses/popular?limit=".concat(e))).data},searchAddresses:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await i.get("/addresses/search?q=".concat(encodeURIComponent(e),"&limit=").concat(t))).data}},d={getTrendingTopics:async()=>(await i.get("/recommendations/trending-topics")).data,getStats:async()=>(await i.get("/recommendations/stats")).data,getUserPreferences:async()=>(await i.get("/recommendations/user-preferences")).data}}},e=>{e.O(0,[783,812,619,441,255,358],()=>e(e.s=1860)),_N_E=e.O()}]);