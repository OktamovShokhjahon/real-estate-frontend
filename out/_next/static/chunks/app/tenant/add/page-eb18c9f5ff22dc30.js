(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{6780:(e,l,a)=>{Promise.resolve().then(a.bind(a,7199))},7199:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>v});var r=a(5155),s=a(2115),n=a(63),t=a(2734),i=a(7621),d=a(7003),o=a(6170),c=a(235),h=a(7001),u=a(7507),m=a(3209),x=a(2663);function v(){let{user:e,isLoading:l}=(0,t.A)(),a=(0,n.useRouter)(),[v,j]=(0,s.useState)(!1),[g,p]=(0,s.useState)({tenantFullName:"",tenantIdLastFour:"",tenantPhoneLastFour:"",rentalPeriod:{from:{month:"",year:""},to:{month:"",year:""}},reviewText:"",rating:""});if((0,s.useEffect)(()=>{l||e||a.push("/login.html")},[e,l,a]),l||void 0===e||!e)return null;let b=async e=>{e.preventDefault(),j(!0);try{let e={...g,rating:g.rating?Number.parseInt(g.rating):void 0,rentalPeriod:{from:{month:Number.parseInt(g.rentalPeriod.from.month),year:Number.parseInt(g.rentalPeriod.from.year)},to:{month:Number.parseInt(g.rentalPeriod.to.month),year:Number.parseInt(g.rentalPeriod.to.year)}}};await i.FH.post("/tenant/reviews",e),x.Ay.success("Отзыв успешно отправлен!"),a.push("/tenant.html")}catch(e){var l,r;x.Ay.error((null==(r=e.response)||null==(l=r.data)?void 0:l.message)||"Не удалось отправить отзыв")}finally{j(!1)}},y=e=>{let{name:l,value:a}=e.target;if(l.includes(".")){let[e,r,s]=l.split(".");p(l=>({...l,[e]:{...l[e],[r]:s?{...l[e][r],[s]:a}:a}}))}else p(e=>({...e,[l]:a}))},N=new Date().getFullYear(),P=Array.from({length:50},(e,l)=>N-l),f=[{value:"1",label:"Январь"},{value:"2",label:"Февраль"},{value:"3",label:"Март"},{value:"4",label:"Апрель"},{value:"5",label:"Май"},{value:"6",label:"Июнь"},{value:"7",label:"Июль"},{value:"8",label:"Август"},{value:"9",label:"Сентябрь"},{value:"10",label:"Октябрь"},{value:"11",label:"Ноябрь"},{value:"12",label:"Декабрь"}];return(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,r.jsxs)(m.Zp,{children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{children:"Добавить отзыв об арендаторе"}),(0,r.jsx)(m.BT,{children:"Поделитесь своим опытом об арендаторе как арендодатель"})]}),(0,r.jsx)(m.Wu,{children:(0,r.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Данные арендатора"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"tenantFullName",children:"Полное имя арендатора *"}),(0,r.jsx)(o.p,{id:"tenantFullName",name:"tenantFullName",value:g.tenantFullName,onChange:y,placeholder:"Введите полное имя арендатора",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"tenantIdLastFour",children:"Паспорт на ИИН"}),(0,r.jsx)(o.p,{id:"tenantIdLastFour",name:"tenantIdLastFour",value:g.tenantIdLastFour,onChange:y,placeholder:"1234",maxLength:4,pattern:"[0-9]{4}",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"tenantPhoneLastFour",children:"Последние 4 цифры телефона *"}),(0,r.jsx)(o.p,{id:"tenantPhoneLastFour",name:"tenantPhoneLastFour",value:g.tenantPhoneLastFour,onChange:y,placeholder:"5678",maxLength:4,pattern:"[0-9]{4}",required:!0})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Период аренды"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(c.J,{children:"С *"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)(u.l6,{value:g.rentalPeriod.from.month,onValueChange:e=>p(l=>({...l,rentalPeriod:{...l.rentalPeriod,from:{...l.rentalPeriod.from,month:e}}})),children:[(0,r.jsx)(u.bq,{children:(0,r.jsx)(u.yv,{placeholder:"Месяц"})}),(0,r.jsx)(u.gC,{children:f.map(e=>(0,r.jsx)(u.eb,{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)(u.l6,{value:g.rentalPeriod.from.year,onValueChange:e=>p(l=>({...l,rentalPeriod:{...l.rentalPeriod,from:{...l.rentalPeriod.from,year:e}}})),children:[(0,r.jsx)(u.bq,{children:(0,r.jsx)(u.yv,{placeholder:"Год"})}),(0,r.jsx)(u.gC,{children:P.map(e=>(0,r.jsx)(u.eb,{value:e.toString(),children:e},e))})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(c.J,{children:"По *"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)(u.l6,{value:g.rentalPeriod.to.month,onValueChange:e=>p(l=>({...l,rentalPeriod:{...l.rentalPeriod,to:{...l.rentalPeriod.to,month:e}}})),children:[(0,r.jsx)(u.bq,{children:(0,r.jsx)(u.yv,{placeholder:"Месяц"})}),(0,r.jsx)(u.gC,{children:f.map(e=>(0,r.jsx)(u.eb,{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)(u.l6,{value:g.rentalPeriod.to.year,onValueChange:e=>p(l=>({...l,rentalPeriod:{...l.rentalPeriod,to:{...l.rentalPeriod.to,year:e}}})),children:[(0,r.jsx)(u.bq,{children:(0,r.jsx)(u.yv,{placeholder:"Год"})}),(0,r.jsx)(u.gC,{children:P.map(e=>(0,r.jsx)(u.eb,{value:e.toString(),children:e},e))})]})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Детали отзыва"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"rating",children:"Рейтинг (необязательно)"}),(0,r.jsxs)(u.l6,{value:g.rating,onValueChange:e=>p(l=>({...l,rating:e})),children:[(0,r.jsx)(u.bq,{children:(0,r.jsx)(u.yv,{placeholder:"Выберите рейтинг"})}),(0,r.jsx)(u.gC,{children:[1,2,3,4,5].map(e=>(0,r.jsxs)(u.eb,{value:e.toString(),children:[e," ",1===e?"звезда":e<5?"звезды":"звезд"]},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"reviewText",children:"Отзыв *"}),(0,r.jsx)(h.T,{id:"reviewText",name:"reviewText",value:g.reviewText,onChange:y,placeholder:"Опишите ваш опыт взаимодействия с этим арендатором. Включите детали об их поведении, истории платежей, уходе за недвижимостью и общей надежности.",rows:6,maxLength:5e3,required:!0}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 text-right",children:[g.reviewText.length,"/5000 символов"]})]})]}),(0,r.jsx)(d.$,{type:"submit",className:"w-full",disabled:v,children:v?"Отправка...":"Отправить отзыв"})]})})]})})}}},e=>{e.O(0,[783,812,395,93,15,92,441,255,358],()=>e(e.s=6780)),_N_E=e.O()}]);